<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Auto QR Generator</title>

<!-- Vue -->
<script src="https://unpkg.com/vue@3"></script>

<!-- QR Code Library -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs2@0.0.2/qrcode.min.js"></script>

<style>
  body { font-family: Arial, sans-serif; text-align: center; margin-top: 40px; }
  #qrcode { margin-top: 30px; }
</style>
</head>

<body>
<div id="app">
  <h2>Auto QR Generator</h2>

  <p v-if="!code">❌ No code found in URL</p>
  <p v-else>QR Code for: <b>{{ code }}</b></p>

  <div id="qrcode"></div>

  <br/><br/>
  <button @click="copyLink">Copy Share Link</button>
</div>


<script>
const app = Vue.createApp({
  data() {
    return {
      code: ""
    }
  },
  mounted() {
    // ✅ Extract code from URL: #/ind/abc23
    const hash = window.location.hash;
    const parts = hash.split("/");

    // parts = ["#/ind", "abc23"]
    this.code = parts[2] || "";

    if (this.code) {
      this.generateQR();
    }
  },
  methods: {
    generateQR() {
      document.getElementById("qrcode").innerHTML = "";
      new QRCode(document.getElementById("qrcode"), {
        text: this.code,
        width: 250,
        height: 250,
        correctLevel: QRCode.CorrectLevel.H
      });
    },
    copyLink() {
      const shareURL = window.location.origin + "/#/" + "ind/" + this.code;
      navigator.clipboard.writeText(shareURL);
      alert("✅ Link Copied:\n" + shareURL);
    }
  }
});

app.mount("#app");
</script>
</body>
</html>
